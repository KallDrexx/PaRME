<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop">

    <PropertyGroup>
        <TargetFramework>netcoreapp3.0</TargetFramework>
        <UseWindowsForms>true</UseWindowsForms>
        <UseWPF>true</UseWPF>
        <Version>0.2.0</Version>
    </PropertyGroup>

    <ItemGroup>
        <PackageReference Include="Microsoft.CodeAnalysis.CSharp.Scripting" Version="3.7.0" />
        <PackageReference Include="Newtonsoft.Json" Version="12.0.3" />
        <PackageReference Include="System.ComponentModel.Composition" Version="4.7.0" />
    </ItemGroup>

    <ItemGroup>
      <Reference Include="FlatRedBall.PluginCore, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null">
        <HintPath>..\Libraries\FlatRedBall.PluginCore.dll</HintPath>
      </Reference>
      <Reference Include="FlatRedBallStandard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
        <HintPath>..\Libraries\FlatRedBallStandard.dll</HintPath>
      </Reference>
      <Reference Include="GlueCommon, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
        <HintPath>..\Libraries\GlueCommon.dll</HintPath>
      </Reference>
      <Reference Include="GlueFormsCore, Version=2020.6.1.1095, Culture=neutral, PublicKeyToken=null">
        <HintPath>..\Libraries\GlueFormsCore.dll</HintPath>
      </Reference>
      <Reference Include="GlueSaveClasses, Version=2020.6.1.1095, Culture=neutral, PublicKeyToken=null">
        <HintPath>..\Libraries\GlueSaveClasses.dll</HintPath>
      </Reference>
    </ItemGroup>

    <ItemGroup>
      <ProjectReference Include="..\Parme.Core\Parme.Core.csproj" />
      <ProjectReference Include="..\Parme.CSharp\Parme.CSharp.csproj" />
      <ProjectReference Include="..\Parme.Frb\Parme.Frb.csproj" />
    </ItemGroup>

    <Target Name="PostBuild" AfterTargets="PostBuildEvent">
        <!-- On successful builds push binaries into Parme.Frb.Example plugins folder, so Glue picks it up -->
        <Exec Command="echo PostBuild ParME Glue Plugin&#xD;&#xA;&#xD;&#xA;IF NOT EXIST &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\&quot; MD &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\&quot;&#xD;&#xA;&#xD;&#xA;copy &quot;$(TargetDir)\Parme.Frb.GluePlugin.dll&quot; &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\\Parme.Frb.GluePlugin.dll&quot;&#xD;&#xA;copy &quot;$(TargetDir)\Parme.Frb.GluePlugin.pdb&quot; &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\\Parme.Frb.GluePlugin.pdb&quot;&#xD;&#xA;&#xD;&#xA;copy &quot;$(TargetDir)\Parme.Core.dll&quot; &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\Parme.Core.dll&quot;&#xD;&#xA;copy &quot;$(TargetDir)\Parme.Core.pdb&quot; &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\Parme.Core.pdb&quot;&#xD;&#xA;&#xD;&#xA;copy &quot;$(TargetDir)\Parme.CSharp.dll&quot; &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\Parme.CSharp.dll&quot;&#xD;&#xA;copy &quot;$(TargetDir)\Parme.CSharp.pdb&quot; &quot;$(SolutionDir)\Parme.Frb.Example\Plugins\Parme.Frb.GluePlugin\Parme.CSharp.pdb&quot;&#xD;&#xA;&#xD;&#xA;" />
    </Target>
</Project>
